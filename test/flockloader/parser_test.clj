(ns flockloader.parser-test
  (:require [clojure.test :refer :all]
            [flockloader.parser :refer :all]))

(def example-xml "<?xml version=\"1.0\" encoding=\"utf-8\" ?><rss version=\"2.0\"><channel><title>Bing: testing</title><link>http://www.bing.com:80/search?q=testing</link><description>Результаты поиска</description><image><url>http://www.bing.com:80/s/a/rsslogo.gif</url><title>testing</title><link>http://www.bing.com:80/search?q=testing</link></image><copyright>© 2017, Microsoft. Все права защищены. Не допускается использовать, воспроизводить или передавать любым образом эти результаты в виде XML в каких-либо целях, кроме обработки результатов Bing в агрегаторе RSS для личного некоммерческого использования. Для любого другого использования данных результатов необходимо явное письменное разрешение корпорации Майкрософт. Получая доступ к этой веб-странице или любым образом используя данные результаты, вы соглашаетесь соблюдать упомянутые выше ограничения.</copyright><item><title>Виртуальный сервер www.testing.ru</title><link>http://testing.ru/</link><description>Как связаться с технической поддержкой: Вы можете позвонить или написать нам письмо по ...</description><pubDate>Пт, 08 дек 2017 20:34:00 GMT</pubDate></item><item><title>Software-Testing.Ru</title><link>http://software-testing.ru/</link><description>Software-Testing.Ru - портал специалистов по тестированию и обеспечению качества ПО</description><pubDate>Чт, 14 дек 2017 09:43:00 GMT</pubDate></item><item><title>Про Тестинг: тесты, тестирование и тестировщики ...</title><link>http://protesting.ru/</link><description>Сайт Про Тестинг - про тестирование программного обеспечения. Вы найдете много полезной ...</description><pubDate>Пн, 11 дек 2017 02:01:00 GMT</pubDate></item><item><title>Software testing - Wikipedia</title><link>https://en.wikipedia.org/wiki/Software_testing</link><description>Software testing is an investigation conducted to provide stakeholders with information about the quality of the software product or service under test. Software ...</description><pubDate>Пн, 11 дек 2017 17:10:00 GMT</pubDate></item><item><title>Speedtest.net by Ookla - The Global Broadband Speed Test</title><link>https://www.speedtest.net/</link><description>Create an Account Testing with multiple browsers or devices? Save all your results in one place; Speedtest Awards Discover which internet service providers and mobile ...</description><pubDate>Чт, 14 дек 2017 14:15:00 GMT</pubDate></item><item><title>Find online tests, practice test, and test creation ...</title><link>http://www.test.com/</link><description>Online tests and testing for certification, practice tests, test making tools, medical testing and more.</description><pubDate>Чт, 14 дек 2017 05:32:00 GMT</pubDate></item><item><title>Testing &amp; Control - Выставка испытательного, контрольно ...</title><link>http://www.testing-control.ru/ru-RU</link><description>Testing &amp; Control — является одной из главных выставок России, где представлен широкий спектр ...</description><pubDate>Сб, 09 дек 2017 21:59:00 GMT</pubDate></item><item><title>Test - Wikipedia</title><link>https://en.wikipedia.org/wiki/Testing</link><description>Look up TEST, Test, Tests, testing, or tests in Wiktionary, the free dictionary.</description><pubDate>Чт, 14 дек 2017 12:56:00 GMT</pubDate></item><item><title>Testing - definition of testing by The Free Dictionary</title><link>https://www.thefreedictionary.com/testing</link><description>Define testing. testing synonyms, testing pronunciation, testing translation, English dictionary definition of testing. n. 1. A procedure for critical evaluation; a ...</description><pubDate>Вт, 12 дек 2017 09:53:00 GMT</pubDate></item><item><title>Онлайн-тест - TESTING.KG</title><link>http://testing.kg/ort/</link><description>1 вар., Практическая грамматика русского языка. Время: 35 мин. Количество частей: 1</description><pubDate>Чт, 14 дек 2017 12:28:00 GMT</pubDate></item></channel></rss>")

(deftest parsing-tests
  (testing "Parsing of bing XML output"
    (let [links (extract-links (java.io.StringReader. example-xml))]
      (is (= (count links) 10)))))
